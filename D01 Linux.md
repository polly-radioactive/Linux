# D01 Linux

## Part 1. Установка ОС

**== Задание ==**

### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox)

- Графический интерфейс должен отсутствовать.
- Узнайте версию Ubuntu, выполнив команду \
`cat /etc/issue.`
- Вставьте скриншот с выводом команды.

**== Решение ==**

1. Установила VirtualBox 6.1.42 ([https://www.virtualbox.org/wiki/Download_Old_Builds_6_1](https://www.virtualbox.org/wiki/Download_Old_Builds_6_1))
2. Загрузила файл ISO Ubuntu 20.04 LTS. ([https://ubuntu.com/download/server](https://ubuntu.com/download/server))
3. Сначала было необходимо создать виртуальную машину для установки. Для этого запустила VirtualBox и нажала на пункт "Создать".
4. Назвала виртуальную машину Ubuntu 20.04 server. Для того, чтобы система, при работе, не испытывала нужды в памяти, устанавливаем размер памяти в 4 Гб. Выбрала размер жесткого(виртуального) 30 Гб. Формат хранения выбрала динамический виртуальный диск. Нажала "готово".
    
    ![vm.jpg](D01%20Linux/vm.jpg)
    
5. При первом запуске виртуальной машины, программа попросит указать ISO файл. Выбрала этот файл и нажала подключить и перезапустить.
    
    ![vm1.jpg](D01%20Linux/vm1.jpg)
    
6. Затем пошла установка операционной системы.
7. Когда установка прошла, было предложено установить настройки. Язык выбрала русский, а все остальные настройки не трогала(оставила по умолчанию).
8. Задала настройки профиля
    
    ![profile.jpg](D01%20Linux/profile.jpg)
    
9. Когда установка была закончена, выбрала Перезагрузить сейчас.
10. Ввела свой логин и пароль.
    
    ![welcome.jpg](D01%20Linux/welcome.jpg)
    
11. Чтобы проверить версию Ubuntu. Ввела
`cat /etc/issue`
    
    ![check.jpg](D01%20Linux/check.jpg)
    

## Part 2. Создание пользователя

**== Задание ==**

### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.

- Вставьте скриншот вызова команды для создания пользователя.
- Новый пользователь должен быть в выводе команды \
`cat /etc/passwd`
- Вставьте скриншот с выводом команды.

**== Решение ==**

1. Добавляем нового пользователя командой
`sudo adduser user2`
2. Интерфейс предложит заполнить различные данные на пользователя id2
    
    ![user.jpg](D01%20Linux/user.jpg)
    
3. Что бы пользователь мог выполнять административные задачи добавляем его в группу adm командой
`sudo usermod -aG adm user2`
4. Результат команды
`cat /etc/passwd`
    
    ![user_check.jpg](D01%20Linux/user_check.jpg)
    

## Part 3. Настройка сети ОС

**== Задание ==**

### Задать название машины вида user-1

### Установить временную зону, соответствующую вашему текущему местоположению.

### Вывести названия сетевых интерфейсов с помощью консольной команды.

- В отчёте дать объяснение наличию интерфейса lo.

### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера.

- В отчёте дать расшифровку DHCP.

### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).

### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).

### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.

- В отчёте опишите, что сделали для выполнения всех семи пунктов (можно как текстом, так и скриншотами).
- Успешно пропинговать удаленные хосты 1.1.1.1 и [ya.ru](http://ya.ru/) и вставить в отчёт скрин с выводом команды. В выводе команды должна быть фраза "0% packet loss"

**== Решение ==**

- С помощью vim открываю файл
`sudo vim ../../etc/hostname`
    
    ![vim.jpg](D01%20Linux/vim.jpg)
    
- В файле меняем имя машины user1
- Смотрю текущие настройки даты и времени командой
`timedatectl`
    
    ![timedatectl.jpg](D01%20Linux/timedatectl.jpg)
    
- Смотрю какие часовые пояса есть, командой
`timedatectl list-timezones`
    
    ![list-timezone.jpg](D01%20Linux/list-timezone.jpg)
    
- Меняю настройки командой
`sudo timedatectl set-timezone Europe/Moscow`
Проверяю настройки часового пояса
    
    ![moscow.jpg](D01%20Linux/moscow.jpg)
    
- Вывожу список сетевых интерфейсов командой
`ip link show`
    
    ![link_show.jpg](D01%20Linux/link_show.jpg)
    
- lo - это интерфейс для отладки серверных программ локально на машине - localhost
- Получаю ip адрес устройства используя консольную команду
`ip addr show`
В зависимости от типа подключения Ethernet-интерфейс подписывается следующим образом: enp0s3, eth0 ( если WiFi : wlp2s0, wlan0, цифры могут отличаться). В данном случае наш ip 10.0.2.15
    
    ![addr_show.jpg](D01%20Linux/addr_show.jpg)
    
- DHCP - Dynamic Host Configuration Protocol - протокол динамической настройки узла
- Для отображения внешнего ip необходимо установить специальную утилиту Curl (Client URL). Для этого необходимо выполнить команду:
`sudo apt-get install curl`
- После установки запустить комманду:
`curl ident.me`
Мой внешний ip адрес 109.252.170.134
    
    ![curl.jpg](D01%20Linux/curl.jpg)
    
- Вывожу на экран внутренний IP-адрес шлюза, он же ip-адрес по умолчанию командой
`ip route`
Можно сократить вывод командой
`ip route | grep default`
Мой ip адрес 10.0.2.2
    
    ![route1.jpg](D01%20Linux/route1.jpg)
    
    ![route2.jpg](D01%20Linux/route2.jpg)
    
- Чтобы задать статичные настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8) открываю файл 00-installer-config.yaml в папке ../../etc/netplan.
    
    ![yaml1.jpg](D01%20Linux/yaml1.jpg)
    
- После вношу изменеия в файл с помощью команды
`sudo nano /etc/netplan/00-installer-config.yaml`
-Информацию в файл заношу из ранее вызваных команд шагами ранее. Поля - addresses, gateway - мной заданные статические адреса.
    
    ![yaml2.jpg](D01%20Linux/yaml2.jpg)
    
- После делаю reboot с помощью команды
`sudo reboot now`
Вижу что к интерфейсу enp0s3 применились изменения.
    
    ![aftet_reboot.jpg](D01%20Linux/aftet_reboot.jpg)
    
- Дальше пропингую удаленные хосты 1.1.1.1
    
    ![ping1.jpg](D01%20Linux/ping1.jpg)
    
- Дальше пропингую удаленные хосты [ya.ru](http://ya.ru/)
    
    ![ping2.jpg](D01%20Linux/ping2.jpg)
    

## Part 4. Обновление ОС

**== Задание ==**

### Обновить системные пакеты до последней на момент выполнения задания версии.

- После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
- Вставить скриншот с этим сообщением в отчёт.

**== Решение ==**

- Необходимо обновить вашу текущую версию дистрибутива командой
`sudo apt update`
    
    ![update.jpg](D01%20Linux/update.jpg)
    
- После обновиляем систему командой
`sudo apt dist-upgrade`
Команда запускает обновление всех пакетов, видим отображение обновления в терминале.
- После reboot запускаем обновление еще раз и видим отсутсвие обновлений.
    
    ![after_reboot.jpg](D01%20Linux/after_reboot.jpg)
    

## Part 5. Использование команды **sudo**

**== Задание ==**

### Разрешить пользователю, созданному в Part 2, выполнять команду sudo.

- В отчёте объяснить *истинное* назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).
- Поменять hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo).
- Вставить скрин с изменённым hostname в отчёт.

**== Решение ==**

- sudo - substitute user and do - команда, позволяющая подменить юзера и выполнить команду от его имени. По умолчанию команда sudo повышает привилегии до root
- Переход между user осуществляем командой
`su user2`
Добавляем пользователя в группу sudo командой
`sudo usermod -aG sudo user2`
-Чтобы сделать изменения постоянными, нужно изменить содержимое двух файлов. Открываем файл */etc/hostname и меняем user1 на hostname-new. Открываем следущий файл /etc/hosts, меняем adm на hostname.
    
    ![part5_1.jpg](D01%20Linux/part5_1.jpg)
    
- Прикрепляю скрин изменений после reboot
    
    ![part5_2.jpg](D01%20Linux/part5_2.jpg)
    

## Part 6. Установка и настройка службы времени

**== Задание ==**

### Настроить службу автоматической синхронизации времени.

- Вывести время, часового пояса, в котором вы сейчас находитесь.
- Вывод следующей команды должен содержать `NTPSynchronized=yes`: \
`timedatectl show`
- Вставить скрины с корректным временем и выводом команды в отчёт.

**== Решение ==**

- Включаем синхронизацию времени с помощью команды
`sudo timedatectl set-ntp on`
- Прикрепляю скриншот после команды
`timedatectl show`
    
    ![part6.jpg](D01%20Linux/part6.jpg)
    

## Part 7. Установка и использование текстовых редакторов

**== Задание ==**

### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)

### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.

- В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла перед закрытием.
- В отчёте укажите, что сделали для выхода с сохранением изменений.

### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.

- В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла после редактирования.
- В отчёте укажите, что сделали для выхода без сохранения изменений.

### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.

- В отчёт вставьте скриншоты:
    - Из каждого редактора с результатами поиска слова.
    - Из каждого редактора с командами, введёнными для замены слова на другое.

**== Решение ==**

### VIM

- Устанавливаем редактор VIM командой
`sudo apt-get install vim`
- Для режима вставки нажимаем i, для возврата Esc. После изменений выходим из файла :wq для сохранения содержимого.
    
    ![vim1.jpg](D01%20Linux/vim1.jpg)
    
- После изменений выходим из файла :q! без сохранения содержимого.
    
    ![vim2.jpg](D01%20Linux/vim2.jpg)
    
- Основные команды для поиска: f - найти один символ, / - искать несколько символов, n - найти следующее вхождение, N - найти предыдущее вхождение.
- Для замены будет использоваться немного другая конструкция: :%s/искать/заменить/g
    
    ![vim3.jpg](D01%20Linux/vim3.jpg)
    
    ![vim4.jpg](D01%20Linux/vim4.jpg)
    
    ![vim5.jpg](D01%20Linux/vim5.jpg)
    

### NANO

- Устанавливаем редактор NANO командой
`sudo apt-get install nano`
- После изменений сочетанием клавиш сохраняем Ctrl+o и выходим из редактора Ctrl+x для сохранения содержимого.
    
    ![nano1.jpg](D01%20Linux/nano1.jpg)
    
- После изменений выходим из редактора Ctrl+x без сохранения содержимого. Редактор предложит выбрать Y или N.
    
    ![nano2.jpg](D01%20Linux/nano2.jpg)
    
- Осуществляем поиск через сочетание клавиш Ctrl+W - можно использовать регулярные выражения.
    
    ![nano3.jpg](D01%20Linux/nano3.jpg)
    
- Осуществляем замену через сочетание клавиш Alt+R.
    
    ![nano4.jpg](D01%20Linux/nano4.jpg)
    

### MCEDIT

- Устанавливаем редактор NANO командой
`sudo apt-get install mcedit`
- После изменений клавишей F2 сохраняем и выходим из редактора клавишей F10 для сохранения содержимого. Либо esc и выбрать сохранить изменения.
    
    ![mcedit1.jpg](D01%20Linux/mcedit1.jpg)
    
- После изменений выходим из редактора клавишей F10 без сохранения содержимого. Редактор предложит выбрать YES или NO.
    
    ![mcedit2.jpg](D01%20Linux/mcedit2.jpg)
    
- Осуществляем поиск через клавишу F7 - можно использовать регулярные выражения. Shift+F7 - Повтор последней операции поиска.
    
    ![mcedit3.jpg](D01%20Linux/mcedit3.jpg)
    
- Осуществляем замену через клавишу F4
    
    ![mcedit4.jpg](D01%20Linux/mcedit4.jpg)
    
    ![mcedit5.jpg](D01%20Linux/mcedit5.jpg)
    

## Part 8. Установка и базовая настройка сервиса **SSHD**

**== Задание ==**

### Установить службу SSHd.

### Добавить автостарт службы при загрузке системы.

### Перенастроить службу SSHd на порт 2022.

### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.

- В отчёте объяснить значение команды и каждого ключа в ней.

### Перезагрузить систему.

- В отчёте опишите, что сделали для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
- Вывод команды netstat -tan должен содержать \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN` \
(если команды netstat нет, то ее нужно установить)
- Скрин с выводом команды вставить в отчёт.
- В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

**== Решение ==**

- Устанавливаем ssh на рабочую машину с помощью команды
`sudo apt install openssh-server`
- При установке SSH-сервер автоматически прописывается в автозагрузку. Управлять его запуском, остановкой или перезапуском можно с помощью команд:
`sudo systemctl start|stop|restart ssh`
- Проверить, что служба ssh.service работает:
`systemctl is-active ssh`
- Добавляем службу sshd в автозапуск, делаем это с помощью команды
`sudo systemctl enable ssh`
- Чтобы перенастроить службу SSHd на порт 2022 открываем файл и меняем 22 на 2022
`sudo vi ../../etc/ssh/sshd_config`
    
    ![part8_1.jpg](D01%20Linux/part8_1.jpg)
    
- Чтобы изменения вступили в силу - выполним рестарт системы командой:
`sudo systemctl restart sshd`
- Выводим статус службы командой
`systemctl status sshd`
    
    ![part8_2.jpg](D01%20Linux/part8_2.jpg)
    
- Находим процесс с помощью команды ps использую дополнительные флаги:
`ps -ef | grep sshd`
- Опция -e, показывает все процессы, а -f показывает полную информацию: UID - идентификатор пользователя выполняющего команду, PID - это идентификатор процесса команды, PPID - идентификатор родительского процесса, который отпустил команду, C - количество дочерних процессов, STIME - это время начала процесса, TTY, TIME, CMD. Передаю в grep паттерн для фильтрации поиска sshd.
    
    ![part8_3.jpg](D01%20Linux/part8_3.jpg)
    
- Результат выполнения команды
    
    ![part8_4.jpg](D01%20Linux/part8_4.jpg)
    
- Расшифровка: -t отобразит только TCP, -a покажет все сокеты(слушаемые и нет) -n будет показывает численные адрес. 0.0.0.0 означает в данном случае любой адрес.

## Part 9. Установка и использование утилит **top**, **htop**

**== Задание ==**

### Установить и запустить утилиты top и htop.

- По выводу команды top определить и написать в отчёте:
    - uptime
    - количество авторизованных пользователей
    - общую загрузку системы
    - общее количество процессов
    - загрузку cpu
    - загрузку памяти
    - pid процесса занимающего больше всего памяти
    - pid процесса, занимающего больше всего процессорного времени
- В отчёт вставить скрин с выводом команды htop:
    - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
    - отфильтрованному для процесса sshd
    - с процессом syslog, найденным, используя поиск
    - с добавленным выводом hostname, clock и uptime

**== Решение ==**

- Устанавливаем утилиты командами
`sudo apt install top | sudo apt install top`
- Запускаем команду
`top`
    
    ![part9_1.jpg](D01%20Linux/part9_1.jpg)
    
- Окно после вывода можно условно разделить на две части. В верхней части находится информация о системе, общем использовании ресурсов процессора и памяти, раздела подкачки, и так далее. В нижней части окна расположен список запущенных процессов с информацией, отсортированных по определённому полю.
- Расшифровка командам
uptime - 1:51 min (время в системе)
количество авторизованных пользователей - johannec
общую загрузку системы (load average) - 0.01, 0.05, 0.01
общее количество процессов (Tasks) - 94
загрузку cpu - 0
загрузку памяти (MiB Mem) - 3932.0 Total
pid процесса занимающего больше всего памяти - стобец %MEM PID 676
    
    ![part9_2.jpg](D01%20Linux/part9_2.jpg)
    
- Чтобы посмотреть какой процесс занимает больше всего памяти воспользуемся клавишей x. Выделяет жирным колонку, по которой выполняется сортировка. Пемемещаться по колонке сортировки клавишами <> . pid процесса, занимающего больше всего процессорного времени - столбец TIME+ PID 2193. Либо можно воспользоваться комадной Shift + P.
- Запускаем команду
`htop`
    
    ![part9_3.jpg](D01%20Linux/part9_3.jpg)
    
- Для сортировки используем клавишу меню F6
- Сортировка процессов по PID

![part9_4.jpg](D01%20Linux/part9_4.jpg)

- Сортировка процессов по PERCENT_CPU
    
    ![part9_5.jpg](D01%20Linux/part9_5.jpg)
    
- Сортировка процессов по PERCENT_MEM
    
    ![part9_6.jpg](D01%20Linux/part9_6.jpg)
    
- Сортировка процессов по TIME
    
    ![part9_7.jpg](D01%20Linux/part9_7.jpg)
    
- Для фильтрации используем клавишу меню F4. Фильтр по sshd
    
    ![part9_8.jpg](D01%20Linux/part9_8.jpg)
    
- Для фильтрации используем клавишу меню F3. Фильтр по syslog
    
    ![part9_9.jpg](D01%20Linux/part9_9.jpg)
    
- Для добавления hostname, clock и uptime нажимаем F2 и в настройках добавляем необходимые атрибуты на дашборд утилиты. Скрин после изменений
    
    ![part9_10.jpg](D01%20Linux/part9_10.jpg)
    

## Part 10. Использование утилиты **fdisk**

**== Задание ==**

### Запустить команду fdisk -l.

- В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.

**== Решение ==**

- Устанавливаем утилиту командами:
`sudo apt update | sudo apt install fdisk`
- После запускаем
`sudo fdisk -l`
название жесткого диска - VBOX HARDDISK
размер - 30 Gib
количество секторов - 62914560
    
    ![part10_1.jpg](D01%20Linux/part10_1.jpg)
    
- Посмотреть размер swap можно с помощью команды
`free -h`
размер swap - 2.9 Gib
    
    ![part10_2.jpg](D01%20Linux/part10_2.jpg)
    

## Part 11. Использование утилиты **df**

**== Задание ==**

### Запустить команду df.

- В отчёте написать для корневого раздела (/):
    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования
- Определить и написать в отчёт единицу измерения в выводе.

### Запустить команду df -Th.

- В отчёте написать для корневого раздела (/):
    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования
- Определить и написать в отчёт тип файловой системы для раздела.

**== Решение ==**

- Запускаем команду в терминале. После запускаем с флагом -h. Разница показывает состояние дисков в килобайтах и мегабайтах, гигабайтов.
`df | df -h`
Видим в отчете утилиты:
размер раздела- Size - 14339080
размер занятого пространства - Used - 5688196
размер свободного пространства - Availiable - 7900704
процент использования - Use - 42%
    
    ![part11_1.jpg](D01%20Linux/part11_1.jpg)
    
    ![part11_2.jpg](D01%20Linux/part11_2.jpg)
    
- Далее запускаем команду с флагом -Th. Разница показывает состояние дисков в килобайтах и мегабайтах, гигабайтов.
`df -Th`
Видим в отчете:
размер раздела- Size - 14G
размер занятого пространства - Used - 5.5G
размер свободного пространства - Availiable - 7.6G
процент использования - Use - 42%
тип файловой системы - Type - ext4
    
    ![part11_3.jpg](D01%20Linux/part11_3.jpg)
    

## Part 12. Использование утилиты **du**

**== Задание ==**

### Запустить команду du.

### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)

### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

- В отчёт вставить скрины с выводом всех использованных команд.

**== Решение ==**

- Для удобства считывания информации будем использовать утилиту du с флагом -h. Данный флаг показывает размер в единицах измерения удобных для человека.
- Смотрим размер папки /home - 148K
`du -h /home`
    
    ![part12_1.jpg](D01%20Linux/part12_1.jpg)
    
- Смотрим размер папки /var - 683M
`du -h /var`
    
    ![part12_2.jpg](D01%20Linux/part12_2.jpg)
    
- Смотрим размер папки /var/log - 35M
`du -h /var/log`
    
    ![part12_3.jpg](D01%20Linux/part12_3.jpg)
    
- Смотрим размер папки /var/log*
`du -h /var/log*`
    
    ![part12_4.jpg](D01%20Linux/part12_4.jpg)
    

## Part 13. Установка и использование утилиты **ncdu**

**== Задание ==**

### Установить утилиту ncdu.

### Вывести размер папок /home, /var, /var/log.

- Размеры должны примерно совпадать с полученными в part 12.
- В отчёт вставить скрины с выводом использованных команд.

**== Решение ==**

- Устанавливаем утилиту ncdu
`sudo apt install ncdu`
- Смотрим размер папки /home
`ncdu /home`
    
    ![part13_1.jpg](D01%20Linux/part13_1.jpg)
    
- Смотрим размер папки /var
`ncdu /var`
    
    ![part13_2.jpg](D01%20Linux/part13_2.jpg)
    
- Смотрим размер папки /var/log
`ncdu /var/log`
    
    ![part13_3.jpg](D01%20Linux/part13_3.jpg)
    

## Part 14. Работа с системными журналами

**== Задание ==**

### Открыть для просмотра:

### 1. /var/log/dmesg

### 2. /var/log/syslog

### 3. /var/log/auth.log

- Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

**== Решение ==**

- Смотрим что в логах через cat. Можно открыть лог любым тескстовым редактором, например vim
`cat /var/log/dmesg`
этот лог содержит информацию о драйверах устройств.
    
    ![part14_1.jpg](D01%20Linux/part14_1.jpg)
    
- Смотрим дальше
`cat /var/log/syslog`
Содержит глобальный системный журнал, в котором пишутся сообщения с момента запуска системы, от ядра Linux, различных служб, обнаруженных устройствах, сетевых интерфейсов и много другого.
    
    ![part14_2.jpg](D01%20Linux/part14_2.jpg)
    
- Смотрим дальше
`cat /var/log/auth.log`
Содержит информацию об авторизации пользователей, включая удачные и неудачные попытки входа в систему.
    
    ![part14_3.jpg](D01%20Linux/part14_3.jpg)
    
- Теперь посмотрим в логе /var/log/auth.log время поледней успешной авторизации и имя пользователя. Видим последний вход johannec 8 May 06:31:59 по средством службы systemd-logind.
- Можно посмотреть командой grep совпанедние по имени юзера или способу входа. Пример:
`grep systemd-logind /var/log/auth.log`
    
    ![part14_4.jpg](D01%20Linux/part14_4.jpg)
    
- Перезапускаем службу sshd
`sudo systemctl restart ssh`
- Смотрим в логах утилитой grep по паттерну sshd
`grep ssh /var/log/auth.log`
    
    ![part14_5.jpg](D01%20Linux/part14_5.jpg)
    

## Part 15. Использование планировщика заданий **CRON**

**== Задание ==**

### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
- Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.

### Удалите все задания из планировщика заданий.

- В отчёт вставьте скрин со списком текущих заданий для CRON.

**== Решение ==**

- Первым делом обновляем пакеты, устанавливаем Cron
`sudo apt update | sudo apt install cron`
- Убедимся, что он настроен для работы в фоновом режиме:
`sudo systemctl enable cron`
- После этого cron будет установлен в системе, а вы сможете начать составлять расписание задач
Команды управления cron
Команда Описание
crontab -e Редактирование или создание файла расписания для текущего пользователя
crontab -l Вывод содержимого расписания текущего пользователя
crontab -r Удаление файла расписания текущего пользователя
crontab -u user Работа с расписаниями конкретных пользователей
- Запускаем файл с планировщиком задач командой:
`crontab -e`
- Первый запуск предложит выбрать текстовый редактор по умолчанию
- Прописываем в файле команду uptime через каждые 2 минуты используя синтаксис планировщика.
    
    ![part15_1.jpg](D01%20Linux/part15_1.jpg)
    
- Команда начинает выполняться после сохранения и выхода из файла. Смотрим через cat файл с записами выполнения команды в планировщике.
`cat /home/johannec/tty.txt`
    
    ![part15_2.jpg](D01%20Linux/part15_2.jpg)
    
- В системных журналах смотрим строчки о выполнениих задач CRON
`grep uptime /var/log/syslog`
    
    ![part15_3.jpg](D01%20Linux/part15_3.jpg)
    
- Вывожу список текущих заданий
`crontab -l`
    
    ![part15_4.jpg](D01%20Linux/part15_4.jpg)
    
- Удалаяем все задания из планировщика и выводим текущий список задний командами:
`crontab -r | crontab -l`
    
    ![part15_5.jpg](D01%20Linux/part15_5.jpg)
    

[CRON_rus](https://www.notion.so/CRON_rus-bccd03343155493395ce661c7f48fa92?pvs=21)